# PageDoctor - 제품 요구사항 문서 (PRD)

## 1. 제품 개요

**PageDoctor**는 웹 페이지의 성능을 검사하고 모니터링하는 대시보드 웹 애플리케이션입니다. URL을 입력하면 Core Web Vitals를 측정하고, 성능 히스토리를 추적하며, 경쟁사와 비교 분석하고, 구체적인 개선 제안과 PDF 리포트를 제공합니다.

### 핵심 가치

- **즉시 진단**: URL 입력 한 번으로 Core Web Vitals + Lighthouse 점수 즉시 확인
- **히스토리 추적**: IndexedDB 기반 로컬 저장으로 성능 변화 추이를 시계열 차트로 시각화
- **경쟁사 비교**: 최대 5개 URL을 동시 분석하여 레이더 차트로 비교
- **실행 가능한 제안**: 점수 기반 자동 개선 제안 + 우선순위 가이드
- **PDF 리포트**: 분석 결과를 전문적인 PDF 문서로 내보내기

## 2. 대상 사용자

| 페르소나 | 설명 | 주요 니즈 |
|----------|------|----------|
| FE/풀스택 개발자 | 웹 성능 최적화를 담당하는 개발자 | Core Web Vitals 측정, 개선 전후 비교, 구체적인 개선 방법 |
| 테크 리드/PM | 제품 성능 지표를 추적하고 보고하는 리더 | 성능 히스토리 추적, 경쟁사 비교, PDF 리포트로 보고 |
| SEO 담당자 | 검색 엔진 최적화를 위해 페이지 속도를 관리하는 담당자 | Lighthouse SEO/접근성 점수, 모바일 성능, 개선 우선순위 |

## 3. 핵심 기능

### 3.1 URL 분석

- [x] URL 입력 필드 + 분석 시작 버튼
- [x] URL 유효성 검사 (프로토콜 자동 추가)
- [x] 분석 진행 상태 표시 (스켈레톤 UI + 단계별 인디케이터)
- [x] 최근 분석 URL 목록 (IndexedDB에서 조회, 개별/전체 삭제)
- [x] 모바일/데스크톱 전략 선택 (기본: 모바일)

### 3.2 Core Web Vitals 대시보드

- [x] LCP (Largest Contentful Paint) - 로딩 성능
- [x] INP (Interaction to Next Paint) - 상호작용 응답성
- [x] CLS (Cumulative Layout Shift) - 시각적 안정성
- [x] 각 지표별 Good / Needs Improvement / Poor 등급 표시
- [x] 등급별 컬러 배지 (녹색/주황/빨강)
- [x] Lab Data (PSI) + Field Data (CrUX) 탭 전환

### 3.3 성능 점수 개요

- [x] Lighthouse 카테고리 점수 (Performance, Accessibility, Best Practices, SEO)
- [x] 원형 게이지 차트 (0-100)
- [x] 점수별 등급 색상 (0-49 빨강, 50-89 주황, 90-100 녹색)
- [x] 전체 점수 요약 카드

### 3.4 성능 히스토리

- [x] URL별 분석 결과 자동 저장 (IndexedDB)
- [x] 시계열 라인 차트 (날짜별 점수 변화)
- [x] Core Web Vitals 트렌드 차트
- [x] 기간 필터 (7일, 30일, 90일, 전체)
- [x] 데이터 내보내기 (JSON)

### 3.5 경쟁사 비교

- [x] 최대 5개 URL 동시 입력
- [x] 병렬 분석 실행 + 개별 진행 상태
- [x] 레이더 차트 비교 (Performance, A11y, BP, SEO)
- [x] Core Web Vitals 나란히 비교 테이블
- [x] 순위 표시 (종합 + 카테고리별)

### 3.6 개선 제안

- [x] Lighthouse Audits 기반 개선 항목 목록
- [x] 우선순위 분류 (High / Medium / Low)
- [x] 카테고리별 필터 (Performance, A11y, BP, SEO)
- [x] 예상 절약 시간/크기 표시 (PSI API 제공 데이터)
- [x] 각 항목별 상세 설명 + 해결 가이드 링크

### 3.7 PDF 리포트

- [x] 분석 결과 PDF 자동 생성 (@react-pdf/renderer)
- [x] 포함 내용: 점수 요약, Core Web Vitals, 개선 제안 Top 10
- [x] PageDoctor 브랜딩 헤더/푸터
- [x] 생성 날짜 + URL 정보
- [x] 클라이언트 사이드 PDF 생성 (서버 불필요)

### 3.8 대시보드 레이아웃

- [x] 벤토 그리드 기반 대시보드
- [x] 반응형 레이아웃 (데스크톱/태블릿/모바일)
- [x] 다크모드 기본 + 라이트모드 전환
- [x] 글래스모피즘 포인트 (카드, 사이드바)
- [x] 부드러운 전환 애니메이션

## 4. 로드맵

### Phase 1 - 핵심 기능 (MVP) ✅

- [x] URL 분석 + Core Web Vitals 대시보드
- [x] Lighthouse 카테고리 점수 표시
- [x] 개선 제안 목록
- [x] 다크모드 벤토 그리드 레이아웃
- [x] IndexedDB 히스토리 저장

### Phase 2 - 고급 기능 ✅

- [x] 성능 히스토리 시계열 차트
- [x] 경쟁사 비교 분석 (레이더 차트)
- [x] PDF 리포트 생성
- [x] CrUX API 필드 데이터 통합
- [x] 데이터 내보내기 (JSON)

### Phase 3 - 확장 ✅

- [x] 정기 분석 스케줄링 (브라우저 알림)
- [x] 성능 버짓 설정 + 경고
- [x] 팀 공유 링크 (결과 URL 공유)
- [x] 다국어 지원 (영어)
- [x] PWA 오프라인 지원

## 5. 비기능 요구사항

| 항목 | 요구사항 |
|------|---------|
| 초기 로딩 | FCP 1.5초 이내 (Vercel Edge Network) |
| 분석 응답 | PSI API 호출 후 결과 표시까지 15초 이내 |
| 데이터 용량 | IndexedDB 저장 URL당 약 5KB, 1,000건 이상 저장 가능 |
| 브라우저 호환 | Chrome 90+, Firefox 90+, Safari 15+, Edge 90+ |
| 접근성 | WCAG 2.1 AA 기준 준수 |
| SEO | Lighthouse SEO 점수 90+ (메타태그, OG, 시맨틱 HTML) |
| 보안 | API 키 서버 사이드 전용, HTTPS 강제 |

## 6. UI 흐름

```
┌──────────────────────────────────────────────────────┐
│ Header (로고 + 네비게이션 + 다크모드 토글)              │
├──────────────────────────────────────────────────────┤
│                                                      │
│  [/ 홈] Hero + URL 입력 바                            │
│  ┌────────────────────────────────────────────┐      │
│  │  🔍 URL을 입력하세요  [모바일|데스크톱] [분석] │      │
│  └────────────────────────────────────────────┘      │
│  최근 분석 URL 목록                                   │
│                                                      │
│  [/analyze] 분석 결과 대시보드 (벤토 그리드)            │
│  ┌──────────┬──────────┬──────────┐                  │
│  │ 성능 점수  │ 접근성    │ SEO      │ ← 게이지 차트   │
│  ├──────────┴──────────┴──────────┤                  │
│  │ Core Web Vitals (LCP / INP / CLS)                │
│  │ [Lab Data] [Field Data]         │                  │
│  ├────────────────────┬───────────┤                  │
│  │ 개선 제안 목록       │ 점수 요약  │                  │
│  │ (우선순위순)        │ 카드      │                  │
│  └────────────────────┴───────────┘                  │
│  [PDF 다운로드] [히스토리에 저장]                       │
│                                                      │
│  [/history] 성능 히스토리                              │
│  ┌────────────────────────────────────────────┐      │
│  │ URL 선택 드롭다운 + 기간 필터                 │      │
│  │ 시계열 라인 차트 (점수 트렌드)                 │      │
│  │ Core Web Vitals 트렌드 차트                  │      │
│  │ 분석 기록 테이블                              │      │
│  └────────────────────────────────────────────┘      │
│                                                      │
│  [/compare] 경쟁사 비교                               │
│  ┌────────────────────────────────────────────┐      │
│  │ URL 1-5 입력 필드 + [비교 분석] 버튼          │      │
│  │ 레이더 차트 (카테고리별 비교)                  │      │
│  │ Core Web Vitals 비교 테이블                  │      │
│  │ 종합 순위 표                                 │      │
│  └────────────────────────────────────────────┘      │
│                                                      │
├──────────────────────────────────────────────────────┤
│ Footer (PageDoctor 브랜딩 + GitHub 링크)              │
└──────────────────────────────────────────────────────┘
```

## 7. 기술 제약사항

| 제약사항 | 설명 | 대응 |
|----------|------|------|
| PSI API 일일 한도 | 무료 25,000건/일 (API 키 사용 시) | 클라이언트 캐싱 + 중복 요청 방지 |
| PSI API 응답 시간 | 평균 10-20초 (Lighthouse 실행 포함) | 스켈레톤 UI + 프로그레스 표시 |
| Vercel 서버리스 타임아웃 | Hobby: 10초, Pro: 60초 | PSI API는 Google 서버에서 실행되므로 영향 없음 |
| Vercel 서버리스에서 Chrome 미지원 | Lighthouse Node API 직접 실행 불가 | PageSpeed Insights API v5 사용 (내부적으로 Lighthouse 실행) |
| CrUX API 데이터 가용성 | 트래픽이 적은 URL은 필드 데이터 없음 | Lab Data(PSI) 기본 표시 + 필드 데이터 없으면 안내 메시지 |
| IndexedDB 용량 | 브라우저별 상이 (보통 50MB-무제한) | URL당 ~5KB로 충분한 히스토리 저장 가능 |
| @react-pdf/renderer | 클라이언트 사이드 전용, 서버 렌더링 불가 | dynamic import + ssr: false 처리 |
